<svg width="1400" height="1200" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .table-box { fill: #f8f9fa; stroke: #343a40; stroke-width: 2; }
      .table-header { fill: #007bff; }
      .table-title { fill: white; font-family: Arial, sans-serif; font-size: 12px; font-weight: bold; }
      .field-text { fill: #343a40; font-family: Arial, sans-serif; font-size: 9px; }
      .pk-field { fill: #dc3545; font-weight: bold; }
      .fk-field { fill: #28a745; }
      .index-field { fill: #6f42c1; }
      .relationship-line { stroke: #6c757d; stroke-width: 2; fill: none; }
      .relationship-arrow { fill: #6c757d; }
      .constraint-text { fill: #fd7e14; font-size: 8px; }
    </style>
  </defs>

  <!-- Title -->
  <text x="700" y="30" text-anchor="middle" class="table-title" font-size="18">Practice Management System - Complete ERD</text>

  <!-- Core Practice Tables -->
  <!-- PracticeProfile Table -->
  <g id="practice-profile">
    <rect x="50" y="60" width="250" height="280" class="table-box"/>
    <rect x="50" y="60" width="250" height="25" class="table-header"/>
    <text x="175" y="77" text-anchor="middle" class="table-title">PracticeProfile</text>

    <text x="60" y="95" class="field-text pk-field">id (UUID, PK)</text>
    <text x="60" y="108" class="field-text">created_at (TIMESTAMP)</text>
    <text x="60" y="121" class="field-text">updated_at (TIMESTAMP)</text>
    <text x="60" y="134" class="field-text index-field">correlation_id (VARCHAR, IDX)</text>
    <text x="60" y="147" class="field-text index-field">tenant_id (VARCHAR, IDX)</text>
    <text x="60" y="160" class="field-text index-field">name (VARCHAR, NOT NULL, IDX)</text>
    <text x="60" y="173" class="field-text">legal_name (VARCHAR)</text>
    <text x="60" y="186" class="field-text">tax_id (VARCHAR)</text>
    <text x="60" y="199" class="field-text index-field">npi_number (VARCHAR, UNIQUE, IDX)</text>
    <text x="60" y="212" class="field-text index-field">email (VARCHAR, IDX)</text>
    <text x="60" y="225" class="field-text">phone (VARCHAR)</text>
    <text x="60" y="238" class="field-text">address_line1 (VARCHAR)</text>
    <text x="60" y="251" class="field-text">city (VARCHAR)</text>
    <text x="60" y="264" class="field-text">state (VARCHAR)</text>
    <text x="60" y="277" class="field-text">timezone (VARCHAR)</text>
    <text x="60" y="290" class="field-text index-field">is_active (BOOLEAN, IDX)</text>
    <text x="60" y="303" class="field-text">accepts_new_patients (BOOLEAN)</text>
    <text x="60" y="316" class="field-text">default_appointment_duration (VARCHAR)</text>
    <text x="60" y="329" class="field-text">... (billing, description fields)</text>
  </g>

  <!-- Location Table -->
  <g id="location">
    <rect x="350" y="60" width="250" height="280" class="table-box"/>
    <rect x="350" y="60" width="250" height="25" class="table-header"/>
    <text x="475" y="77" text-anchor="middle" class="table-title">Location</text>

    <text x="360" y="95" class="field-text pk-field">id (UUID, PK)</text>
    <text x="360" y="108" class="field-text">created_at (TIMESTAMP)</text>
    <text x="360" y="121" class="field-text">updated_at (TIMESTAMP)</text>
    <text x="360" y="134" class="field-text index-field">correlation_id (VARCHAR, IDX)</text>
    <text x="360" y="147" class="field-text index-field">tenant_id (VARCHAR, IDX)</text>
    <text x="360" y="160" class="field-text fk-field">practice_profile_id (UUID, FK)</text>
    <text x="360" y="173" class="field-text">name (VARCHAR, NOT NULL)</text>
    <text x="360" y="186" class="field-text">location_type (VARCHAR)</text>
    <text x="360" y="199" class="field-text">phone (VARCHAR)</text>
    <text x="360" y="212" class="field-text">email (VARCHAR)</text>
    <text x="360" y="225" class="field-text">address_line1 (VARCHAR, NOT NULL)</text>
    <text x="360" y="238" class="field-text">city (VARCHAR, NOT NULL)</text>
    <text x="360" y="251" class="field-text">state (VARCHAR, NOT NULL)</text>
    <text x="360" y="264" class="field-text">timezone (VARCHAR)</text>
    <text x="360" y="277" class="field-text">is_primary (BOOLEAN)</text>
    <text x="360" y="290" class="field-text">is_active (BOOLEAN)</text>
    <text x="360" y="303" class="field-text">wheelchair_accessible (BOOLEAN)</text>
    <text x="360" y="316" class="field-text">accepts_appointments (BOOLEAN)</text>
    <text x="360" y="329" class="field-text">... (parking, transport fields)</text>
  </g>

  <!-- Core Entity Tables -->
  <!-- Client Table -->
  <g id="client">
    <rect x="50" y="380" width="250" height="300" class="table-box"/>
    <rect x="50" y="380" width="250" height="25" class="table-header"/>
    <text x="175" y="397" text-anchor="middle" class="table-title">Client</text>

    <text x="60" y="415" class="field-text pk-field">id (UUID, PK)</text>
    <text x="60" y="428" class="field-text">created_at (TIMESTAMP)</text>
    <text x="60" y="441" class="field-text">updated_at (TIMESTAMP)</text>
    <text x="60" y="454" class="field-text index-field">correlation_id (VARCHAR, IDX)</text>
    <text x="60" y="467" class="field-text index-field">tenant_id (VARCHAR, IDX)</text>
    <text x="60" y="480" class="field-text index-field">first_name (VARCHAR, NOT NULL, IDX)</text>
    <text x="60" y="493" class="field-text index-field">last_name (VARCHAR, NOT NULL, IDX)</text>
    <text x="60" y="506" class="field-text">middle_name (VARCHAR)</text>
    <text x="60" y="519" class="field-text index-field">email (VARCHAR, IDX)</text>
    <text x="60" y="532" class="field-text index-field">phone (VARCHAR, IDX)</text>
    <text x="60" y="545" class="field-text">address_line1 (VARCHAR)</text>
    <text x="60" y="558" class="field-text">city, state, zip_code (VARCHAR)</text>
    <text x="60" y="571" class="field-text index-field">date_of_birth (DATE, IDX)</text>
    <text x="60" y="584" class="field-text">gender (VARCHAR)</text>
    <text x="60" y="597" class="field-text">insurance_provider (VARCHAR)</text>
    <text x="60" y="610" class="field-text">emergency_contact_name (VARCHAR)</text>
    <text x="60" y="623" class="field-text">primary_diagnosis (TEXT)</text>
    <text x="60" y="636" class="field-text index-field">is_active (BOOLEAN, IDX)</text>
    <text x="60" y="649" class="field-text">preferred_language (VARCHAR)</text>
    <text x="60" y="662" class="field-text">... (clinical, notes fields)</text>
  </g>

  <!-- Provider Table -->
  <g id="provider">
    <rect x="350" y="380" width="250" height="300" class="table-box"/>
    <rect x="350" y="380" width="250" height="25" class="table-header"/>
    <text x="475" y="397" text-anchor="middle" class="table-title">Provider</text>

    <text x="360" y="415" class="field-text pk-field">id (UUID, PK)</text>
    <text x="360" y="428" class="field-text">created_at (TIMESTAMP)</text>
    <text x="360" y="441" class="field-text">updated_at (TIMESTAMP)</text>
    <text x="360" y="454" class="field-text index-field">correlation_id (VARCHAR, IDX)</text>
    <text x="360" y="467" class="field-text index-field">tenant_id (VARCHAR, IDX)</text>
    <text x="360" y="480" class="field-text index-field">first_name (VARCHAR, NOT NULL, IDX)</text>
    <text x="360" y="493" class="field-text index-field">last_name (VARCHAR, NOT NULL, IDX)</text>
    <text x="360" y="506" class="field-text">title (VARCHAR)</text>
    <text x="360" y="519" class="field-text">credentials (VARCHAR)</text>
    <text x="360" y="532" class="field-text index-field">specialty (VARCHAR, IDX)</text>
    <text x="360" y="545" class="field-text index-field">license_number (VARCHAR, IDX)</text>
    <text x="360" y="558" class="field-text index-field">email (VARCHAR, UNIQUE, IDX)</text>
    <text x="360" y="571" class="field-text">phone (VARCHAR)</text>
    <text x="360" y="584" class="field-text">office_address_line1 (VARCHAR)</text>
    <text x="360" y="597" class="field-text index-field">npi_number (VARCHAR, UNIQUE, IDX)</text>
    <text x="360" y="610" class="field-text">default_appointment_duration (VARCHAR)</text>
    <text x="360" y="623" class="field-text">accepts_new_patients (BOOLEAN)</text>
    <text x="360" y="636" class="field-text index-field">is_active (BOOLEAN, IDX)</text>
    <text x="360" y="649" class="field-text">bio (TEXT)</text>
    <text x="360" y="662" class="field-text">... (office, admin fields)</text>
  </g>

  <!-- Appointment Table -->
  <g id="appointment">
    <rect x="650" y="380" width="250" height="300" class="table-box"/>
    <rect x="650" y="380" width="250" height="25" class="table-header"/>
    <text x="775" y="397" text-anchor="middle" class="table-title">Appointment</text>

    <text x="660" y="415" class="field-text pk-field">id (UUID, PK)</text>
    <text x="660" y="428" class="field-text">created_at (TIMESTAMP)</text>
    <text x="660" y="441" class="field-text">updated_at (TIMESTAMP)</text>
    <text x="660" y="454" class="field-text index-field">correlation_id (VARCHAR, IDX)</text>
    <text x="660" y="467" class="field-text index-field">tenant_id (VARCHAR, IDX)</text>
    <text x="660" y="480" class="field-text fk-field">client_id (UUID, FK, IDX)</text>
    <text x="660" y="493" class="field-text fk-field">provider_id (UUID, FK, IDX)</text>
    <text x="660" y="506" class="field-text index-field">scheduled_start (TIMESTAMP, IDX)</text>
    <text x="660" y="519" class="field-text index-field">scheduled_end (TIMESTAMP, IDX)</text>
    <text x="660" y="532" class="field-text">actual_start (TIMESTAMP)</text>
    <text x="660" y="545" class="field-text">actual_end (TIMESTAMP)</text>
    <text x="660" y="558" class="field-text index-field">appointment_type (ENUM, IDX)</text>
    <text x="660" y="571" class="field-text index-field">status (ENUM, IDX)</text>
    <text x="660" y="584" class="field-text">duration_minutes (INTEGER)</text>
    <text x="660" y="597" class="field-text">billable_units (INTEGER)</text>
    <text x="660" y="610" class="field-text">location (VARCHAR)</text>
    <text x="660" y="623" class="field-text">is_telehealth (BOOLEAN)</text>
    <text x="660" y="636" class="field-text">cancellation_reason (VARCHAR)</text>
    <text x="660" y="649" class="field-text">notes (TEXT)</text>
    <text x="660" y="662" class="field-text">... (reminder, billing fields)</text>
  </g>

  <!-- Note Table -->
  <g id="note">
    <rect x="950" y="380" width="250" height="300" class="table-box"/>
    <rect x="950" y="380" width="250" height="25" class="table-header"/>
    <text x="1075" y="397" text-anchor="middle" class="table-title">Note</text>

    <text x="960" y="415" class="field-text pk-field">id (UUID, PK)</text>
    <text x="960" y="428" class="field-text">created_at (TIMESTAMP)</text>
    <text x="960" y="441" class="field-text">updated_at (TIMESTAMP)</text>
    <text x="960" y="454" class="field-text index-field">correlation_id (VARCHAR, IDX)</text>
    <text x="960" y="467" class="field-text index-field">tenant_id (VARCHAR, IDX)</text>
    <text x="960" y="480" class="field-text fk-field">client_id (UUID, FK, IDX)</text>
    <text x="960" y="493" class="field-text fk-field">provider_id (UUID, FK, IDX)</text>
    <text x="960" y="506" class="field-text fk-field">appointment_id (UUID, FK, IDX)</text>
    <text x="960" y="519" class="field-text index-field">note_type (ENUM, IDX)</text>
    <text x="960" y="532" class="field-text">title (VARCHAR, NOT NULL)</text>
    <text x="960" y="545" class="field-text">content (TEXT, NOT NULL)</text>
    <text x="960" y="558" class="field-text">diagnosis_codes (TEXT)</text>
    <text x="960" y="571" class="field-text">treatment_goals (TEXT)</text>
    <text x="960" y="584" class="field-text">interventions (TEXT)</text>
    <text x="960" y="597" class="field-text">client_response (TEXT)</text>
    <text x="960" y="610" class="field-text">plan (TEXT)</text>
    <text x="960" y="623" class="field-text">is_signed (BOOLEAN)</text>
    <text x="960" y="636" class="field-text">is_locked (BOOLEAN)</text>
    <text x="960" y="649" class="field-text">billable (BOOLEAN)</text>
    <text x="960" y="662" class="field-text">... (review, compliance fields)</text>
  </g>

  <!-- Ledger Table -->
  <g id="ledger">
    <rect x="50" y="720" width="250" height="280" class="table-box"/>
    <rect x="50" y="720" width="250" height="25" class="table-header"/>
    <text x="175" y="737" text-anchor="middle" class="table-title">LedgerEntry</text>

    <text x="60" y="755" class="field-text pk-field">id (UUID, PK)</text>
    <text x="60" y="768" class="field-text">created_at (TIMESTAMP)</text>
    <text x="60" y="781" class="field-text">updated_at (TIMESTAMP)</text>
    <text x="60" y="794" class="field-text index-field">correlation_id (VARCHAR, IDX)</text>
    <text x="60" y="807" class="field-text index-field">tenant_id (VARCHAR, IDX)</text>
    <text x="60" y="820" class="field-text fk-field">client_id (UUID, FK, IDX)</text>
    <text x="60" y="833" class="field-text index-field">transaction_type (ENUM, IDX)</text>
    <text x="60" y="846" class="field-text index-field">amount (NUMERIC, IDX)</text>
    <text x="60" y="859" class="field-text">description (VARCHAR, NOT NULL)</text>
    <text x="60" y="872" class="field-text index-field">service_date (DATE, IDX)</text>
    <text x="60" y="885" class="field-text index-field">billing_code (VARCHAR, IDX)</text>
    <text x="60" y="898" class="field-text">diagnosis_code (VARCHAR)</text>
    <text x="60" y="911" class="field-text">payment_method (ENUM)</text>
    <text x="60" y="924" class="field-text">reference_number (VARCHAR)</text>
    <text x="60" y="937" class="field-text index-field">is_posted (BOOLEAN, IDX)</text>
    <text x="60" y="950" class="field-text index-field">is_reconciled (BOOLEAN, IDX)</text>
    <text x="60" y="963" class="field-text">reconciliation_date (DATE)</text>
    <text x="60" y="976" class="field-text">... (insurance, notes fields)</text>
  </g>

  <!-- Security & Compliance Tables -->
  <!-- AuthToken Table -->
  <g id="auth-token">
    <rect x="350" y="720" width="250" height="280" class="table-box"/>
    <rect x="350" y="720" width="250" height="25" class="table-header"/>
    <text x="475" y="737" text-anchor="middle" class="table-title">AuthToken</text>

    <text x="360" y="755" class="field-text pk-field">id (UUID, PK)</text>
    <text x="360" y="768" class="field-text">created_at (TIMESTAMP)</text>
    <text x="360" y="781" class="field-text">updated_at (TIMESTAMP)</text>
    <text x="360" y="794" class="field-text index-field">correlation_id (VARCHAR, IDX)</text>
    <text x="360" y="807" class="field-text index-field">tenant_id (VARCHAR, IDX)</text>
    <text x="360" y="820" class="field-text index-field">token_hash (VARCHAR, UNIQUE, IDX)</text>
    <text x="360" y="833" class="field-text index-field">token_type (ENUM, IDX)</text>
    <text x="360" y="846" class="field-text index-field">status (ENUM, IDX)</text>
    <text x="360" y="859" class="field-text index-field">user_id (UUID, IDX)</text>
    <text x="360" y="872" class="field-text">issued_at (TIMESTAMP)</text>
    <text x="360" y="885" class="field-text index-field">expires_at (TIMESTAMP, IDX)</text>
    <text x="360" y="898" class="field-text">last_used_at (TIMESTAMP)</text>
    <text x="360" y="911" class="field-text">revoked_at (TIMESTAMP)</text>
    <text x="360" y="924" class="field-text">scopes (JSONB)</text>
    <text x="360" y="937" class="field-text">metadata (JSONB)</text>
    <text x="360" y="950" class="field-text">ip_address (VARCHAR)</text>
    <text x="360" y="963" class="field-text">user_agent (TEXT)</text>
    <text x="360" y="976" class="field-text">... (refresh, parent fields)</text>
  </g>

  <!-- EncryptionKey Table -->
  <g id="encryption-key">
    <rect x="650" y="720" width="250" height="280" class="table-box"/>
    <rect x="650" y="720" width="250" height="25" class="table-header"/>
    <text x="775" y="737" text-anchor="middle" class="table-title">EncryptionKey</text>

    <text x="660" y="755" class="field-text pk-field">id (UUID, PK)</text>
    <text x="660" y="768" class="field-text">created_at (TIMESTAMP)</text>
    <text x="660" y="781" class="field-text">updated_at (TIMESTAMP)</text>
    <text x="660" y="794" class="field-text index-field">correlation_id (VARCHAR, IDX)</text>
    <text x="660" y="807" class="field-text index-field">tenant_id (VARCHAR, IDX)</text>
    <text x="660" y="820" class="field-text index-field">key_name (VARCHAR, IDX)</text>
    <text x="660" y="833" class="field-text index-field">key_type (ENUM, IDX)</text>
    <text x="660" y="846" class="field-text index-field">kms_key_id (VARCHAR, UNIQUE, IDX)</text>
    <text x="660" y="859" class="field-text index-field">kms_provider (ENUM, IDX)</text>
    <text x="660" y="872" class="field-text">kms_region (VARCHAR)</text>
    <text x="660" y="885" class="field-text index-field">status (ENUM, IDX)</text>
    <text x="660" y="898" class="field-text index-field">version (INTEGER, IDX)</text>
    <text x="660" y="911" class="field-text">activated_at (TIMESTAMP)</text>
    <text x="660" y="924" class="field-text index-field">expires_at (TIMESTAMP, IDX)</text>
    <text x="660" y="937" class="field-text">rotated_at (TIMESTAMP)</text>
    <text x="660" y="950" class="field-text fk-field">parent_key_id (UUID, FK)</text>
    <text x="660" y="963" class="field-text fk-field">rotation_policy_id (UUID, FK)</text>
    <text x="660" y="976" class="field-text">... (token, metadata fields)</text>
  </g>

  <!-- KeyRotationPolicy Table -->
  <g id="key-rotation-policy">
    <rect x="950" y="720" width="250" height="280" class="table-box"/>
    <rect x="950" y="720" width="250" height="25" class="table-header"/>
    <text x="1075" y="737" text-anchor="middle" class="table-title">KeyRotationPolicy</text>

    <text x="960" y="755" class="field-text pk-field">id (UUID, PK)</text>
    <text x="960" y="768" class="field-text">created_at (TIMESTAMP)</text>
    <text x="960" y="781" class="field-text">updated_at (TIMESTAMP)</text>
    <text x="960" y="794" class="field-text index-field">correlation_id (VARCHAR, IDX)</text>
    <text x="960" y="807" class="field-text index-field">tenant_id (VARCHAR, IDX)</text>
    <text x="960" y="820" class="field-text">policy_name (VARCHAR, NOT NULL)</text>
    <text x="960" y="833" class="field-text">description (TEXT)</text>
    <text x="960" y="846" class="field-text index-field">key_type (ENUM, IDX)</text>
    <text x="960" y="859" class="field-text">rotation_interval_days (INTEGER)</text>
    <text x="960" y="872" class="field-text index-field">trigger_type (ENUM, IDX)</text>
    <text x="960" y="885" class="field-text">max_key_age_days (INTEGER)</text>
    <text x="960" y="898" class="field-text">advance_notice_days (INTEGER)</text>
    <text x="960" y="911" class="field-text index-field">is_active (BOOLEAN, IDX)</text>
    <text x="960" y="924" class="field-text">auto_rotate (BOOLEAN)</text>
    <text x="960" y="937" class="field-text">notification_settings (JSONB)</text>
    <text x="960" y="950" class="field-text">last_rotation_check (TIMESTAMP)</text>
    <text x="960" y="963" class="field-text">next_rotation_due (TIMESTAMP)</text>
    <text x="960" y="976" class="field-text">... (compliance fields)</text>
  </g>

  <!-- FHIR & Audit Tables -->
  <!-- FHIRMapping Table -->
  <g id="fhir-mapping">
    <rect x="1250" y="380" width="250" height="300" class="table-box"/>
    <rect x="1250" y="380" width="250" height="25" class="table-header"/>
    <text x="1375" y="397" text-anchor="middle" class="table-title">FHIRMapping</text>

    <text x="1260" y="415" class="field-text pk-field">id (UUID, PK)</text>
    <text x="1260" y="428" class="field-text">created_at (TIMESTAMP)</text>
    <text x="1260" y="441" class="field-text">updated_at (TIMESTAMP)</text>
    <text x="1260" y="454" class="field-text index-field">correlation_id (VARCHAR, IDX)</text>
    <text x="1260" y="467" class="field-text index-field">tenant_id (VARCHAR, IDX)</text>
    <text x="1260" y="480" class="field-text index-field">internal_id (UUID, IDX)</text>
    <text x="1260" y="493" class="field-text index-field">fhir_resource_type (ENUM, IDX)</text>
    <text x="1260" y="506" class="field-text index-field">fhir_resource_id (VARCHAR, IDX)</text>
    <text x="1260" y="519" class="field-text">fhir_server_url (VARCHAR)</text>
    <text x="1260" y="532" class="field-text index-field">status (ENUM, IDX)</text>
    <text x="1260" y="545" class="field-text">version (VARCHAR)</text>
    <text x="1260" y="558" class="field-text">last_sync_at (TIMESTAMP)</text>
    <text x="1260" y="571" class="field-text">last_error (TEXT)</text>
    <text x="1260" y="584" class="field-text">last_error_at (TIMESTAMP)</text>
    <text x="1260" y="597" class="field-text">error_count (INTEGER)</text>
    <text x="1260" y="610" class="field-text">is_active (BOOLEAN)</text>
    <text x="1260" y="623" class="field-text">created_by (VARCHAR)</text>
    <text x="1260" y="636" class="field-text">updated_by (VARCHAR)</text>
    <text x="1260" y="649" class="field-text">notes (TEXT)</text>
    <text x="1260" y="662" class="field-text constraint-text">UNIQUE(internal_id, fhir_resource_type)</text>
  </g>

  <!-- AuditLog Table -->
  <g id="audit-log">
    <rect x="1250" y="720" width="250" height="280" class="table-box"/>
    <rect x="1250" y="720" width="250" height="25" class="table-header"/>
    <text x="1375" y="737" text-anchor="middle" class="table-title">AuditLog</text>

    <text x="1260" y="755" class="field-text pk-field">id (UUID, PK)</text>
    <text x="1260" y="768" class="field-text">created_at (TIMESTAMP)</text>
    <text x="1260" y="781" class="field-text">updated_at (TIMESTAMP)</text>
    <text x="1260" y="794" class="field-text index-field">correlation_id (VARCHAR, IDX)</text>
    <text x="1260" y="807" class="field-text index-field">tenant_id (VARCHAR, IDX)</text>
    <text x="1260" y="820" class="field-text index-field">user_id (UUID, IDX)</text>
    <text x="1260" y="833" class="field-text index-field">action (VARCHAR, IDX)</text>
    <text x="1260" y="846" class="field-text index-field">resource_type (VARCHAR, IDX)</text>
    <text x="1260" y="859" class="field-text">resource_id (UUID)</text>
    <text x="1260" y="872" class="field-text">old_values (JSON)</text>
    <text x="1260" y="885" class="field-text">new_values (JSON)</text>
    <text x="1260" y="898" class="field-text">ip_address (VARCHAR)</text>
    <text x="1260" y="911" class="field-text">user_agent (TEXT)</text>
    <text x="1260" y="924" class="field-text constraint-text">Indexes: correlation_id, user_id,</text>
    <text x="1260" y="937" class="field-text constraint-text">resource, created_at, action,</text>
    <text x="1260" y="950" class="field-text constraint-text">user_date composite</text>
  </g>

  <!-- Relationships -->
  <!-- PracticeProfile to Location -->
  <path d="M 300 160 L 350 160" class="relationship-line"/>
  <polygon points="345,155 355,160 345,165" class="relationship-arrow"/>
  <text x="325" y="155" text-anchor="middle" class="field-text" font-size="8">1:N</text>

  <!-- Client to Appointment -->
  <path d="M 300 480 L 650 480" class="relationship-line"/>
  <polygon points="645,475 655,480 645,485" class="relationship-arrow"/>
  <text x="475" y="475" text-anchor="middle" class="field-text" font-size="8">1:N</text>

  <!-- Provider to Appointment -->
  <path d="M 600 493 L 650 493" class="relationship-line"/>
  <polygon points="645,488 655,493 645,498" class="relationship-arrow"/>
  <text x="625" y="488" text-anchor="middle" class="field-text" font-size="8">1:N</text>

  <!-- Client to Note -->
  <path d="M 300 480 L 950 480" class="relationship-line"/>
  <polygon points="945,475 955,480 945,485" class="relationship-arrow"/>
  <text x="625" y="475" text-anchor="middle" class="field-text" font-size="8">1:N</text>

  <!-- Provider to Note -->
  <path d="M 600 493 L 950 493" class="relationship-line"/>
  <polygon points="945,488 955,493 945,498" class="relationship-arrow"/>
  <text x="775" y="488" text-anchor="middle" class="field-text" font-size="8">1:N</text>

  <!-- Appointment to Note -->
  <path d="M 900 506 L 950 506" class="relationship-line"/>
  <polygon points="945,501 955,506 945,511" class="relationship-arrow"/>
  <text x="925" y="501" text-anchor="middle" class="field-text" font-size="8">1:N</text>

  <!-- Client to LedgerEntry -->
  <path d="M 175 680 L 175 720" class="relationship-line"/>
  <polygon points="170,715 175,725 180,715" class="relationship-arrow"/>
  <text x="185" y="700" text-anchor="middle" class="field-text" font-size="8">1:N</text>

  <!-- EncryptionKey self-reference -->
  <path d="M 775 950 Q 825 975 775 1000 Q 725 975 775 950" class="relationship-line"/>
  <text x="825" y="975" text-anchor="middle" class="field-text" font-size="8">parent</text>

  <!-- KeyRotationPolicy to EncryptionKey -->
  <path d="M 950 963 L 900 963" class="relationship-line"/>
  <polygon points="905,958 895,963 905,968" class="relationship-arrow"/>
  <text x="925" y="958" text-anchor="middle" class="field-text" font-size="8">1:N</text>

  <!-- Multi-tenancy and Constraints Notes -->
  <text x="700" y="1050" text-anchor="middle" class="field-text" font-size="14" font-weight="bold">Key Features:</text>
  <text x="700" y="1070" text-anchor="middle" class="field-text" font-size="12">• Multi-Tenancy: All tables include tenant_id for data isolation</text>
  <text x="700" y="1085" text-anchor="middle" class="field-text" font-size="12">• HIPAA Compliance: Audit trails, encryption keys, correlation tracking</text>
  <text x="700" y="1100" text-anchor="middle" class="field-text" font-size="12">• Performance: Comprehensive indexing strategy for all queries</text>
  <text x="700" y="1115" text-anchor="middle" class="field-text" font-size="12">• Security: Token-based auth, encrypted PHI, key rotation policies</text>
  <text x="700" y="1130" text-anchor="middle" class="field-text" font-size="12">• Interoperability: FHIR mappings for external system integration</text>

  <!-- Legend -->
  <g id="legend">
    <rect x="50" y="1050" width="200" height="120" class="table-box"/>
    <rect x="50" y="1050" width="200" height="25" class="table-header"/>
    <text x="150" y="1067" text-anchor="middle" class="table-title">Legend</text>

    <text x="60" y="1085" class="field-text pk-field">Primary Key (PK)</text>
    <text x="60" y="1100" class="field-text fk-field">Foreign Key (FK)</text>
    <text x="60" y="1115" class="field-text index-field">Indexed Field (IDX)</text>
    <text x="60" y="1130" class="field-text constraint-text">Constraints/Unique</text>
    <text x="60" y="1145" class="field-text">Regular Field</text>
    <text x="60" y="1160" class="field-text" font-size="8">1:N = One-to-Many Relationship</text>
  </g>
</svg>
